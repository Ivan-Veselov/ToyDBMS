# ToyDBMS

Пример реализации небольшой СУБД, сделанный для курса "Обработка и Оптимизация Запросов в СУБД", ВШЭ, осень 2018 года. Авторы: Вячеслав Галактионов, Георгий Чернышев, Евгений Ключиков и Валентин Григорьев.

# Сборка

Для успешной сборки должны быть установлены:
- Компилятор C++14
- make
- bison 3.0.4
- flex 2.6.1
- patch
- readline (опционально, для сборки plannertestexe)

Для сборки достаточно запустить команду `make`.

# Запуск

В результате сборки будет создано 4 исполняемых файла:
1. `parsertestexe` принимает на стандартный ввод запрос, парсит его и выводит полученное синтаксическое дерево.
2. `plannertestexe` предоставляет оболочку, в которой удобно тестировать правильность исполнения запросов. Использует библиотеку readline для поддержки истории ввода и редактирования вводимого запроса.
3. `testexe` принимает на стандартный ввод один запрос и выводит результат его исполнения. Необходим для автоматического тестирования.

При исполнении запросов ожидает увидеть рядом с собой папку `tables`, в которой будут расположены файлы `ИМЯТАБЛИЦЫ.csv`, содержащие все необходимые данные соответствующей таблицы. Первой строкой каждого такого файла должен идти заголовок, содержащий имена атрибутов с префиксом i, если атрибут целочисленный, и префиксом s, если атрибут строковый. Например, таблица, состоящая из целочисленного атрибута `num` и строкового атрибута `text`, будет выглядеть следующим образом:
```
inum,stext
15,test
1,two words
3,just another test
```

# Тестирование

Для автоматического тестирования полученного решения предоставляется небольшой скрипт вместе с небольшим набором данных и запросов, которые можно найти в папке `tests`.

В папке `datasets` расположены папки `queries`, `tables` и `results`. Для каждого такого набора данных будут исполнены все указанные запросы, а результат исполнения будет сравнён с ожидаемым результатом из папки `results`.

Запустить тестирование можно либо запуском `run_all.sh` из папки, в которой он расположен, либо с помощью команды `make test`, запущенной из корневой папки проекта.

# Отказ от ответственности

Данное программное обеспечение предоставляется «как есть», без каких-либо гарантий, явно выраженных или подразумеваемых, включая гарантии товарной пригодности, соответствия по его конкретному назначению и отсутствия нарушений, но не ограничиваясь ими. Ни в каком случае авторы или правообладатели не несут ответственности по каким-либо искам, за ущерб или по иным требованиям, в том числе, при действии контракта, деликте или иной ситуации, возникшим из-за использования программного обеспечения или иных действий с программным обеспечением.

